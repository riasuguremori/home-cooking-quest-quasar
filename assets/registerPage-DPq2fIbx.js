import{U as y,J as x,h as V,o as S,j as b,b as n,e as o,N as Q,K as e,S as m,Q as f}from"./index-CCltDTcc.js";import{Q as q}from"./QForm-CoHpBmVC.js";import{Q as _}from"./QPage-DfUJbLHa.js";import{u as A}from"./use-quasar-CUmE3VzD.js";import{c as M,a as d,v as c,b as P,u as $,d as p}from"./index.esm-6MkVtUNW.js";const k={class:"row justify-center"},B={class:"col-12 col-md-8 col-lg-6"},U={class:"row justify-center q-gutter-md"},K={__name:"registerPage",setup(j){const g=A(),v=x(),w=M({account:d().required("帳號必填").min(4,"最少4個字").max(20,"最多20個字").test("isAlphanumeric","帳號只能是英、數字",r=>r?c.isAlphanumeric(r):!0),password:d().required("密碼必填").min(4,"密碼最少4個字").max(20,"密碼最多20個字").test("isAscii","密碼只能是英、數字、特殊符號",r=>r?c.isAscii(r):!0),confirmPassword:d().required("密碼必填").min(4,"密碼最少4個字").max(20,"密碼最多20個字").test("isAscii","密碼只能是英、數字、特殊符號",r=>r?c.isAscii(r):!0).oneOf([P("password")],"密碼不一致")}),t=$({validationSchema:w,initialValues:{account:"",password:"",confirmPassword:""}}),l=p("account"),i=p("password"),u=p("confirmPassword"),h=t.handleSubmit(async r=>{try{console.log("1"),await y.create(r),g.notify({color:"positive",message:"註冊成功",icon:"check",position:"bottom"}),v.push("/login")}catch(s){console.log(s);const a=s?.response?.data?.message||"發生錯誤";g.notify({color:"negative",message:a,icon:"report_problem",position:"bottom"})}});return(r,s)=>(S(),V(_,{padding:""},{default:b(()=>[n("div",k,[n("div",B,[s[4]||(s[4]=n("h1",{class:"text-h3 text-center q-mb-md"},"註冊",-1)),o(Q,{class:"q-mb-md"}),o(q,{onSubmit:e(h),class:"q-gutter-y-md"},{default:b(()=>[o(m,{modelValue:e(l).value.value,"onUpdate:modelValue":s[0]||(s[0]=a=>e(l).value.value=a),error:!!e(l).errorMessage.value,"error-message":e(l).errorMessage.value,label:"帳號",hint:"長度 4 ~ 20 的英數字",maxlength:"20",counter:"",outlined:"",disable:e(t).isSubmitting.value},null,8,["modelValue","error","error-message","disable"]),o(m,{modelValue:e(i).value.value,"onUpdate:modelValue":s[1]||(s[1]=a=>e(i).value.value=a),error:!!e(i).errorMessage.value,"error-message":e(i).errorMessage.value,label:"密碼",hint:"長度 4 ~ 20 的英數字、特殊符號",type:"password",maxlength:"20",counter:"",outlined:"",disable:e(t).isSubmitting.value},null,8,["modelValue","error","error-message","disable"]),o(m,{modelValue:e(u).value.value,"onUpdate:modelValue":s[2]||(s[2]=a=>e(u).value.value=a),error:!!e(u).errorMessage.value,"error-message":e(u).errorMessage.value,label:"確認密碼",hint:"長度 4 ~ 20 的英數字、特殊符號",type:"password",maxlength:"20",counter:"",outlined:"",disable:e(t).isSubmitting.value},null,8,["modelValue","error","error-message","disable"]),n("div",U,[o(f,{type:"button",flat:"",label:"取消",color:"primary",onClick:s[3]||(s[3]=a=>e(v).push("/"))}),o(f,{type:"submit",flat:"",color:"primary",loading:e(t).isSubmitting.value,label:"註冊"},null,8,["loading"])])]),_:1},8,["onSubmit"])])])]),_:1}))}};export{K as default};
