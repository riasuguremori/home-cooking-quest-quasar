import{Q as ee}from"./QResizeObserver-B-ajq8rO.js";import{q as te,v as ae,a1 as de,a2 as V,aJ as le,z as q,p as n,B as c,X as ve,aK as Te,l as S,aL as $e,u as Le,aM as Oe,x as Pe,a8 as He,aN as We,aO as Me,aP as Qe,C as re,W as De,P as Re,Y as se,E as Ve,aQ as Z,aR as _e,aE as N,aS as Fe,H as Ae,ab as Ie}from"./index-CCltDTcc.js";import{T as p,Q as Ne}from"./TouchPan-Bw1igJGw.js";import{b as E}from"./format-hlGAdIUH.js";const Je=te({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:W,emit:m}){const{proxy:{$q:y}}=ae(),r=de(le,V);if(r===V)return console.error("QHeader needs to be child of QLayout"),V;const d=q(parseInt(e.heightHint,10)),x=q(!0),T=n(()=>e.reveal===!0||r.view.value.indexOf("H")!==-1||y.platform.is.ios&&r.isContainer.value===!0),$=n(()=>{if(e.modelValue!==!0)return 0;if(T.value===!0)return x.value===!0?d.value:0;const l=d.value-r.scroll.value.position;return l>0?l:0}),b=n(()=>e.modelValue!==!0||T.value===!0&&x.value!==!0),a=n(()=>e.modelValue===!0&&b.value===!0&&e.reveal===!0),M=n(()=>"q-header q-layout__section--marginal "+(T.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(b.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),B=n(()=>{const l=r.rows.value.top,w={};return l[0]==="l"&&r.left.space===!0&&(w[y.lang.rtl===!0?"right":"left"]=`${r.left.size}px`),l[2]==="r"&&r.right.space===!0&&(w[y.lang.rtl===!0?"left":"right"]=`${r.right.size}px`),w});function f(l,w){r.update("header",l,w)}function s(l,w){l.value!==w&&(l.value=w)}function L({height:l}){s(d,l),f("size",l)}function h(l){a.value===!0&&s(x,!0),m("focusin",l)}c(()=>e.modelValue,l=>{f("space",l),s(x,!0),r.animate()}),c($,l=>{f("offset",l)}),c(()=>e.reveal,l=>{l===!1&&s(x,e.modelValue)}),c(x,l=>{r.animate(),m("reveal",l)}),c(r.scroll,l=>{e.reveal===!0&&s(x,l.direction==="up"||l.position<=e.revealOffset||l.position-l.inflectionPoint<100)});const u={};return r.instances.header=u,e.modelValue===!0&&f("size",d.value),f("space",e.modelValue),f("offset",$.value),ve(()=>{r.instances.header===u&&(r.instances.header=void 0,f("size",0),f("offset",0),f("space",!1))}),()=>{const l=Te(W.default,[]);return e.elevated===!0&&l.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),l.push(S(ee,{debounce:0,onResize:L})),S("header",{class:M.value,style:B.value,onFocusin:h},l)}}}),ce=150,Ye=te({name:"QDrawer",inheritAttrs:!1,props:{...Oe,...Le,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...$e,"onLayout","miniState"],setup(e,{slots:W,emit:m,attrs:y}){const r=ae(),{proxy:{$q:d}}=r,x=Pe(e,d),{preventBodyScroll:T}=Qe(),{registerTimeout:$,removeTimeout:b}=He(),a=de(le,V);if(a===V)return console.error("QDrawer needs to be child of QLayout"),V;let M,B=null,f;const s=q(e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint),L=n(()=>e.mini===!0&&s.value!==!0),h=n(()=>L.value===!0?e.miniWidth:e.width),u=q(e.showIfAbove===!0&&s.value===!1?!0:e.modelValue===!0),l=n(()=>e.persistent!==!0&&(s.value===!0||fe.value===!0));function w(t,o){if(z(),t!==!1&&a.animate(),C(0),s.value===!0){const k=a.instances[A.value];k?.belowBreakpoint===!0&&k.hide(!1),P(1),a.isContainer.value!==!0&&T(!0)}else P(0),t!==!1&&J(!1);$(()=>{t!==!1&&J(!0),o!==!0&&m("show",t)},ce)}function i(t,o){_(),t!==!1&&a.animate(),P(0),C(D.value*h.value),Y(),o!==!0?$(()=>{m("hide",t)},ce):b()}const{show:v,hide:g}=We({showing:u,hideOnRouteChange:l,handleShow:w,handleHide:i}),{addToHistory:z,removeFromHistory:_}=Me(u,g,l),Q={belowBreakpoint:s,hide:g},O=n(()=>e.side==="right"),D=n(()=>(d.lang.rtl===!0?-1:1)*(O.value===!0?1:-1)),ne=q(0),R=q(!1),U=q(!1),oe=q(h.value*D.value),A=n(()=>O.value===!0?"left":"right"),j=n(()=>u.value===!0&&s.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:h.value:0),K=n(()=>e.overlay===!0||e.miniToOverlay===!0||a.view.value.indexOf(O.value?"R":"L")!==-1||d.platform.is.ios===!0&&a.isContainer.value===!0),F=n(()=>e.overlay===!1&&u.value===!0&&s.value===!1),fe=n(()=>e.overlay===!0&&u.value===!0&&s.value===!1),he=n(()=>"fullscreen q-drawer__backdrop"+(u.value===!1&&R.value===!1?" hidden":"")),me=n(()=>({backgroundColor:`rgba(0,0,0,${ne.value*.4})`})),ie=n(()=>O.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),ye=n(()=>O.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),be=n(()=>{const t={};return a.header.space===!0&&ie.value===!1&&(K.value===!0?t.top=`${a.header.offset}px`:a.header.space===!0&&(t.top=`${a.header.size}px`)),a.footer.space===!0&&ye.value===!1&&(K.value===!0?t.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(t.bottom=`${a.footer.size}px`)),t}),we=n(()=>{const t={width:`${h.value}px`,transform:`translateX(${oe.value}px)`};return s.value===!0?t:Object.assign(t,be.value)}),ge=n(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),Se=n(()=>`q-drawer q-drawer--${e.side}`+(U.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(x.value===!0?" q-drawer--dark q-dark":"")+(R.value===!0?" no-transition":u.value===!0?"":" q-layout--prevent-focus")+(s.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${L.value===!0?"mini":"standard"}`+(K.value===!0||F.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(ie.value===!0?" q-drawer--top-padding":""))),qe=n(()=>{const t=d.lang.rtl===!0?e.side:A.value;return[[p,Ce,void 0,{[t]:!0,mouse:!0}]]}),xe=n(()=>{const t=d.lang.rtl===!0?A.value:e.side;return[[p,ue,void 0,{[t]:!0,mouse:!0}]]}),ke=n(()=>{const t=d.lang.rtl===!0?A.value:e.side;return[[p,ue,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function X(){Be(s,e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint)}c(s,t=>{t===!0?(M=u.value,u.value===!0&&g(!1)):e.overlay===!1&&e.behavior!=="mobile"&&M!==!1&&(u.value===!0?(C(0),P(0),Y()):v(!1))}),c(()=>e.side,(t,o)=>{a.instances[o]===Q&&(a.instances[o]=void 0,a[o].space=!1,a[o].offset=0),a.instances[t]=Q,a[t].size=h.value,a[t].space=F.value,a[t].offset=j.value}),c(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&X()}),c(()=>e.behavior+e.breakpoint,X),c(a.isContainer,t=>{u.value===!0&&T(t!==!0),t===!0&&X()}),c(a.scrollbarWidth,()=>{C(u.value===!0?0:void 0)}),c(j,t=>{H("offset",t)}),c(F,t=>{m("onLayout",t),H("space",t)}),c(O,()=>{C()}),c(h,t=>{C(),G(e.miniToOverlay,t)}),c(()=>e.miniToOverlay,t=>{G(t,h.value)}),c(()=>d.lang.rtl,()=>{C()}),c(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(ze(),a.animate())}),c(L,t=>{m("miniState",t)});function C(t){t===void 0?re(()=>{t=u.value===!0?0:h.value,C(D.value*t)}):(a.isContainer.value===!0&&O.value===!0&&(s.value===!0||Math.abs(t)===h.value)&&(t+=D.value*a.scrollbarWidth.value),oe.value=t)}function P(t){ne.value=t}function J(t){const o=t===!0?"remove":a.isContainer.value!==!0?"add":"";o!==""&&document.body.classList[o]("q-body--drawer-toggle")}function ze(){B!==null&&clearTimeout(B),r.proxy&&r.proxy.$el&&r.proxy.$el.classList.add("q-drawer--mini-animate"),U.value=!0,B=setTimeout(()=>{B=null,U.value=!1,r?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function Ce(t){if(u.value!==!1)return;const o=h.value,k=E(t.distance.x,0,o);if(t.isFinal===!0){k>=Math.min(75,o)===!0?v():(a.animate(),P(0),C(D.value*o)),R.value=!1;return}C((d.lang.rtl===!0?O.value!==!0:O.value)?Math.max(o-k,0):Math.min(0,k-o)),P(E(k/o,0,1)),t.isFirst===!0&&(R.value=!0)}function ue(t){if(u.value!==!0)return;const o=h.value,k=t.direction===e.side,I=(d.lang.rtl===!0?k!==!0:k)?E(t.distance.x,0,o):0;if(t.isFinal===!0){Math.abs(I)<Math.min(75,o)===!0?(a.animate(),P(1),C(0)):g(),R.value=!1;return}C(D.value*I),P(E(1-I/o,0,1)),t.isFirst===!0&&(R.value=!0)}function Y(){T(!1),J(!0)}function H(t,o){a.update(e.side,t,o)}function Be(t,o){t.value!==o&&(t.value=o)}function G(t,o){H("size",t===!0?e.miniWidth:o)}return a.instances[e.side]=Q,G(e.miniToOverlay,h.value),H("space",F.value),H("offset",j.value),e.showIfAbove===!0&&e.modelValue!==!0&&u.value===!0&&e["onUpdate:modelValue"]!==void 0&&m("update:modelValue",!0),De(()=>{m("onLayout",F.value),m("miniState",L.value),M=e.showIfAbove===!0;const t=()=>{(u.value===!0?w:i)(!1,!0)};if(a.totalWidth.value!==0){re(t);return}f=c(a.totalWidth,()=>{f(),f=void 0,u.value===!1&&e.showIfAbove===!0&&s.value===!1?v(!1):t()})}),ve(()=>{f?.(),B!==null&&(clearTimeout(B),B=null),u.value===!0&&Y(),a.instances[e.side]===Q&&(a.instances[e.side]=void 0,H("size",0),H("offset",0),H("space",!1))}),()=>{const t=[];s.value===!0&&(e.noSwipeOpen===!1&&t.push(Re(S("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),qe.value)),t.push(se("div",{ref:"backdrop",class:he.value,style:me.value,"aria-hidden":"true",onClick:g},void 0,"backdrop",e.noSwipeBackdrop!==!0&&u.value===!0,()=>ke.value)));const o=L.value===!0&&W.mini!==void 0,k=[S("div",{...y,key:""+o,class:[ge.value,y.class]},o===!0?W.mini():Ve(W.default))];return e.elevated===!0&&u.value===!0&&k.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(se("aside",{ref:"content",class:Se.value,style:we.value},k,"contentclose",e.noSwipeClose!==!0&&s.value===!0,()=>xe.value)),S("div",{class:"q-drawer-container"},t)}}}),Ge=te({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:W,emit:m}){const{proxy:{$q:y}}=ae(),r=q(null),d=q(y.screen.height),x=q(e.container===!0?0:y.screen.width),T=q({position:0,direction:"down",inflectionPoint:0}),$=q(0),b=q(_e.value===!0?0:Z()),a=n(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),M=n(()=>e.container===!1?{minHeight:y.screen.height+"px"}:null),B=n(()=>b.value!==0?{[y.lang.rtl===!0?"left":"right"]:`${b.value}px`}:null),f=n(()=>b.value!==0?{[y.lang.rtl===!0?"right":"left"]:0,[y.lang.rtl===!0?"left":"right"]:`-${b.value}px`,width:`calc(100% + ${b.value}px)`}:null);function s(i){if(e.container===!0||document.qScrollPrevented!==!0){const v={position:i.position.top,direction:i.direction,directionChanged:i.directionChanged,inflectionPoint:i.inflectionPoint.top,delta:i.delta.top};T.value=v,e.onScroll!==void 0&&m("scroll",v)}}function L(i){const{height:v,width:g}=i;let z=!1;d.value!==v&&(z=!0,d.value=v,e.onScrollHeight!==void 0&&m("scrollHeight",v),u()),x.value!==g&&(z=!0,x.value=g),z===!0&&e.onResize!==void 0&&m("resize",i)}function h({height:i}){$.value!==i&&($.value=i,u())}function u(){if(e.container===!0){const i=d.value>$.value?Z():0;b.value!==i&&(b.value=i)}}let l=null;const w={instances:{},view:n(()=>e.view),isContainer:n(()=>e.container),rootRef:r,height:d,containerHeight:$,scrollbarWidth:b,totalWidth:n(()=>x.value+b.value),rows:n(()=>{const i=e.view.toLowerCase().split(" ");return{top:i[0].split(""),middle:i[1].split(""),bottom:i[2].split("")}}),header:N({size:0,offset:0,space:!1}),right:N({size:300,offset:0,space:!1}),footer:N({size:0,offset:0,space:!1}),left:N({size:300,offset:0,space:!1}),scroll:T,animate(){l!==null?clearTimeout(l):document.body.classList.add("q-body--layout-animate"),l=setTimeout(()=>{l=null,document.body.classList.remove("q-body--layout-animate")},155)},update(i,v,g){w[i][v]=g}};if(Ie(le,w),Z()>0){let i=function(){z=null,_.classList.remove("hide-scrollbar")},v=function(){if(z===null){if(_.scrollHeight>y.screen.height)return;_.classList.add("hide-scrollbar")}else clearTimeout(z);z=setTimeout(i,300)},g=function(Q){z!==null&&Q==="remove"&&(clearTimeout(z),i()),window[`${Q}EventListener`]("resize",v)},z=null;const _=document.body;c(()=>e.container!==!0?"add":"remove",g),e.container!==!0&&g("add"),Fe(()=>{g("remove")})}return()=>{const i=Ae(W.default,[S(Ne,{onScroll:s}),S(ee,{onResize:L})]),v=S("div",{class:a.value,style:M.value,ref:e.container===!0?void 0:r,tabindex:-1},i);return e.container===!0?S("div",{class:"q-layout-container overflow-hidden",ref:r},[S(ee,{onResize:h}),S("div",{class:"absolute-full",style:B.value},[S("div",{class:"scroll",style:f.value},[v])])]):v}}});export{Ge as Q,Je as a,Ye as b};
